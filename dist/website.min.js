/**
 * whatbrowser.ru, version 0.1.0
 *
 * whatbrowser.ru is freely distributable under the terms of MIT-style license
 * For details, see http://whatbrowser.ru
 */
(function(a,b,c,d,e){"use strict";var f=a.navigator;function g(){if(f.cookieEnabled){return true}document.cookie="cookietest=1";var a=document.cookie.indexOf("cookietest=")!=-1;document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT";return a}function h(){try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(a){return true}}catch(b){if(f.mimeTypes&&f.mimeTypes["application/x-shockwave-flash"]!=undefined&&f.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return true}}return false}function i(a,b,c,d){a[b]=d?d[b]:c()}function j(c,d){var e=c;i(c,"browser_size",function(){return{height:b(a).height(),width:b(a).width()}},d);e.browser_size.toString=function(){return e.browser_size.width+" x "+e.browser_size.height+" px"}}function k(a,b){var c=a;i(a,"cookies",function(){return g()},b)}function l(a,b){var c=a;i(a,"flash",function(){return{enabled:h(),version:d&&d.getFlashPlayerVersion()}},b);c.flash.toString=function(){if(c.flash.enabled&&c.flash.version){return c.flash.version.major+"."+c.flash.version.minor+"."+c.flash.version.release}else{return c.flash.enabled?"да":"нет"}}}function m(a,b){var c=a;i(a,"java",function(){return{enabled:f.javaEnabled&&f.javaEnabled(),version:e&&e.getJREs().shift()}},b);c.java.toString=function(){return c.java.enabled?c.java.version||"да":"нет"}}function n(a,b){var c=a;i(a,"language",function(){return f.language||f.userLanguage},b)}function o(a,b){var c=a;i(a,"online",function(){return f.onLine},b)}function p(b,c){var d=b;i(b,"screen",function(){return a.screen&&{color_depth:a.screen.colorDepth,height:a.screen.height,width:a.screen.width}},c);d.screen.toString=function(){return a.screen?d.screen.width+" x "+d.screen.height+" px, "+d.screen.color_depth+" bit":""}}function q(a,b){var d=a;if(!c){d.ua={ua:f.userAgent};return}i(a,"ua",function(){return(new c).getResult()},b);d.ua.toString=function(){return d.ua.ua};d.ua.browser.toString=function(){var a=d.ua.browser,b=a.name||"";b+=a.major&&" "+a.major||"";b+=a.version&&" ("+a.version+")"||"";return b};d.ua.device.toString=function(){var a=d.ua.device,b=a.vendor||"";b+=a.model&&" "+a.model||"";b+=a.type&&" ("+a.type+")"||"";return b};d.ua.engine.toString=function(){var a=d.ua.engine,b=a.name||"";b+=a.version&&" "+a.version||"";return b};d.ua.os.toString=function(){var a=d.ua.os,b=a.name||"";b+=a.version&&" "+a.version||"";return b}}function r(a,b){var c=a;c.geo=b;if(c.geo&&c.geo.position){c.geo.position.toString=function(){var a=c.geo.position;return a.latitude?a.latitude+", "+a.longitude:""}}if(c.geo&&c.geo.address){c.geo.address.toString=function(){var a=c.geo.address,b=a.country||"";b+=a.region&&", "+a.region||"";b+=a.city&&", "+a.city||"";return b}}}function s(a){var c=a,d=b.Deferred();b.jsonp&&b.jsonp("//freegeoip.net/json/?callback=?",{timeout:500}).done(function(b){r(a,{ip:b.ip,position:{latitude:b.latitude,longitude:b.longitude},address:{country:b.country_name,region:b.region_name,city:b.city}});d.resolve(a)}).fail(function(){d.resolve(a)});if(!b.jsonp){d.resolve(a)}return d}function t(a){var b=this;j(b,a);k(b,a);l(b,a);m(b,a);n(b,a);o(b,a);p(b,a);q(b,a);if(a){r(b,a.geo)}}t.create=function(a){var c=new t,d=b.Deferred();a=a||{};if(a.geo){s(c).always(function(a){d.resolve(a)})}else{d.resolve(c)}return d};a.WhatBrowser=t;return t})(window,window.jQuery,window.UAParser,window.swfobject,window.deployJava);(function(){"use strict";function a(a){var b=0,c,d,e;if(a.length==0)return b;for(c=0,e=a.length;c<e;c++){d=a.charCodeAt(c);b=(b<<5)-b+d;b|=0}return b}function b(a,c){var d,e=c?a[c]:a,f="";function g(a){return'"'+a+'"'}d=typeof e;if(d==="object"){if(c){f+=g(c)+":{"}else{f+="{"}for(var h in e){f+=b(e,h)}f+="},"}else if(d==="function"){}else if(d==="string"){f+=g(c)+":"+g(e)+","}else{f+=g(c)+":"+e+","}return f}window.Hashcode={serialize:window.JSON?window.JSON.stringify:b};return window.Hashcode})();(function(a,b,c){"use strict";var d="https://api.parse.com/1/classes/WhatBrowser",e={"X-Parse-Application-Id":"WxMn71WOwf2RM6s6vYR57Th1rsfRplumcDDaWQxF","X-Parse-REST-API-Key":"EA4xA8UNhbUK5eMyHepEJnUWDyCzoMZxr0t1HOmp"},f=1e3;var g=true;function h(){function a(){var a=window.location.hash;if(a&&a.substr(0,2)==="#!"){return{value:a.substr(2),own:false}}return null}function c(){if(b.enabled){var a=b.get("whatbrowser");if(a){return{value:a,own:true}}}return null}return a()||c()}function i(){var h=c.create({geo:true}),i=a.Deferred();h.done(function(c){if(g){a.ajax(d,{contentType:"application/json",data:JSON.stringify(c),dataType:"json",headers:e,timeout:f,type:"POST"}).done(function(a){c.id=a.objectId;c.link="http://whatbrowser.ru/#!"+c.id;if(b.enabled){b.set("whatbrowser",c.id,{expires:28800})}i.resolve(c)}).fail(function(a,b,d){i.reject(c,d)})}else{i.reject(c,{message:"Parse not initialized"})}});return i}function j(b){var h=a.Deferred();if(g){a.ajax(d+"/"+b,{contentType:"application/json",dataType:"json",headers:e,timeout:f,type:"GET"}).done(function(a){var d=new c(a);d.id=b;d.link="http://whatbrowser.ru/#!"+d.id;h.resolve(d)}).fail(function(a,b,c){h.reject(c)})}else{h.reject({message:"Parse not initialized"})}return h}window.WhatBrowserManager={get_id:h,create:i,load:j};return window.WhatBrowserManager})(window.jQuery,window.Cookies,window.WhatBrowser,window.Parse);(function(a,b,c,d,e){"use strict";function f(a,b){var c=b&&b.toString&&b.toString()||""+b;if(c==="undefined"||!c){return""}return"<tr>"+"<th>"+a+"</th>"+"<td>"+c+"</td>"+"</tr>"}function g(a){var b="";b+=f("Куки",a.cookies?"да":"нет");b+=f("Флеш",a.flash);b+=f("Java",a.java);b+=f("Язык",a.language);b+=f("Страница",a.browser_size);b+=f("Экран",a.screen);b+=f("Браузер",a.ua&&a.ua.browser);b+=f("Движок",a.ua&&a.ua.engine);b+=f("ОС",a.ua&&a.ua.os);b+=f("Устройство",a.ua&&a.ua.device);b+=f("Юзер-агент",a.ua);b+=f("IP-адрес",a.geo&&a.geo.ip);b+=f("Местоположение",a.geo&&a.geo.address);return b}function h(a,b){var c="";if(!b){c="Вы смотрите браузер по ссылке "+'<a href="'+a.link+'">'+a.id+"</a>"}else if(a.ua.browser.name){c="У вас "+a.ua.browser.name+" "+a.ua.browser.major;c+=a.ua.os.name?" на "+a.ua.os.name:""}else{c="У вас неизвестный науке браузер :-("}return c}function i(c){if(b&&c.id&&c.flash&&c.flash.enabled){a("#copy-value").val(c.link)}else if(b&&c.flash&&c.flash.enabled){a("#info-link").hide();a("#info-copy").show()}else if(c.id){a("#info-link-copy").hide();a("#mail-value").val(c.link);a("#info-link-mail").find("a").attr("href","mailto:?subject="+encodeURIComponent("Информация о моем браузере")+"&body="+encodeURIComponent(c.link));a("#info-link-mail").show()}else{a("#info-link").hide();a("#info-nothing").show()}}function j(b,d){var e=a("#details-table").children("tbody");e.html(g(b));a("#details-tocopy").val(c.serialize(b));a("#header-msg").html(h(b,d));if(d){i(b)}else{a("#info-link").hide()}a("#message").hide();a("#result").fadeIn()}function k(c){var d=new b(c.get(0));d.on("aftercopy",function(b){var c=a(b.target),d=c.prev(),e=c.next();d.focus().select();e.text("Скопировано!");window.setTimeout(function(){e.text("")},500)})}function l(){a(".link-text").click(function(){a(this).select()});b&&b.config({hoverClass:"zero-hover",activeClass:"zero-active"});b&&k(a("#info-link").find("button"));b&&k(a("#info-copy").find("button"))}function m(b){e.load(b.value).done(function(a){j(a,b.own)}).fail(function(c){if(b.own){n()}else{a("#message").find("h2").text("По этой ссылке ничего нет :-(")}})}function n(){e.create().done(function(a){j(a,true)}).fail(function(a,b){j(a,true)})}a(function(){l();var a=e.get_id();if(a){m(a)}else{n()}})})(window.jQuery,window.ZeroClipboard,window.Hashcode,window.WhatBrowser,window.WhatBrowserManager);